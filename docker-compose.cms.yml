services:
  cms:
    container_name: keystone-cms
    build:
      context: https://github.com/USSF-ORBIT/ussf-portal-cms.git#main
      dockerfile: Dockerfile
    restart: always
    ports:
      - '3001:3001'
    environment:
      PORT: 3001
      SESSION_DOMAIN: localhost
      SESSION_SECRET: thisvaluecanbeanythingitisonlyforlocaldevelopment
      DATABASE_URL: postgres://keystone:keystonecms@keystone-db:5432/keystone
      PORTAL_URL: http://localhost:3000
      REDIS_URL: redis://portal_redis:6379
    depends_on:
      - keystone-db
      - redis
